<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <!-- <script>
        // Normal function functioning
        function myfun(){
            console.log('Within the function')
        }
        console.log('Start here')
        myfun()
        console.log('End here!')

        // Async function functioning
        console.log('Start async')
        setTimeout(()=> {
            console.log('Inside Async SetTimeOut')
        }, 1000)
        console.log('End async!')

        // Callback is not alwaya async
        console.log('Start here')
        const arr = [1,2,3,4,5,6,7,8,9,10]
        arr.forEach(r => {
            console.log(r)
        })
        console.log('End here!')


        // Use of callback function
        console.log('Start here...')

        function getName(name, callback){
            setTimeout(() => {
                console.log('Inside Name SetTimeOut function')
                //return name
                callback(name);
            }, 2000)
        }
                // Extended to understand the callback hell
        
        function getHobbies(name, callback){
            setTimeout(()=>{
                console.log('Inside Hobbies SetTimeOut function')
                callback(['Cricket', 'Badminton', 'Dancing', 'Reading']);
            }, 2000)
        }

        const nm = getName('Vandana', 
        (nm)=>{console.log(nm); getHobbies(nm, (hobby)=>{
        console.log(hobby) }) })
        console.log('End here!')

    </script> -->

    <script>
        //Basic example of Promise : Producing Code
        const promiseObj = new Promise((resolve, reject)=>{
            let req = 10
            if (true){
                resolve(req)
            }else{
                reject("Request Rejected")
            }
        }).then( //Consuming code
            (req) => {
                console.log(req)
                return req+10
        }).then( //Consuming code
            (req) => {
                console.log(req)
        }).catch(
            (error) => {
                console.log(error)},
        ).finally(()=> {
                console.log("Cleaned") 
            });
    </script>

    <script>
                    // Resolving the callback hell problem using Promise
                    console.log('Start here...')

                    function getName(name) {
                        return new Promise((resolve, reject)=>{
                            setTimeout(() => {
                            console.log('Inside Name SetTimeOut function')
                            resolve(name);
                        }, 2000);
                        })
                    }
                    // Extended to understand the callback hell

                    function getHobbies(name) {
                        return new Promise((resolve, reject)=>{
                            setTimeout(() => {
                            console.log('Inside Hobbies SetTimeOut function')
                            resolve(['Cricket', 'Badminton', 'Dancing', 'Reading']);
                        }, 2000);
                        })
                    }
                    
                    //consuming code
                    // getName('Vandana')
                    // .then(nm => getHobbies(nm))
                    // .then(hobby => console.log(hobby))

                    // console.log('End here!')

                    //async await concept
                    let showHobby = async()=> {
                        try {
                            const nm = await getName('Vandy')
                            const hobby =await getHobbies(nm)
                            console.log(hobby)
                        } catch (error) {
                            console.log("Could not fetch hobbies")
                        }
                    }

                    showHobby()
                    console.log('End')
    </script>
</body>
</html>